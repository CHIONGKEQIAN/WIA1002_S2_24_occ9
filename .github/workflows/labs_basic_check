name: Valid Lab files

on:
  push:
    branches:
      - main
      - master
  pull_request:
    branches:
      - main
      - master

jobs:
  check_labs_directory:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Check file types
        run: |
          # Check if there are any files under Labs\ that are not .java or .txt
          find Labs/ -type f ! \( -name '*.java' -o -name '*.txt' \)
          # Store the exit code in a variable
          exit_code=$?
          # Exit with an error code if any non .java or .txt files are found
          if [ $exit_code -eq 0 ]; then
            echo "Error: Found files other than .java or .txt under Labs\ directory."
            exit 1
          fi
